<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- link jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- link jquery -->
    <!-- favicon -->
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.css" />
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.12.1/datatables.min.js"></script>
    <link rel="stylesheet" href="src/css/style.css">
</head>

<body class="adminpanel-html-body">
    <nav>
        <div class="container-fluid navbar navbar-fixed-top">
            <div class="navbar-header">
                <a class="navbar-brand" href="/">
                    <img id="brand" alt="Brand" src="images/brand.png" height="30px" width="50px">
                </a>
            </div>
            <ul class="nav navbar-nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="#">About</a></li>
                <li><a href="#">Contact</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right" id="nav-right-btn">
                <li><a href="register"><span class="glyphicon glyphicon-user"></span> Sign Up</a></li>
                <li><a href="login"><span class="glyphicon glyphicon-log-in"></span> Login</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right" id="nav-right-loggedin">
                <li id="nav-shoppingcart-item"><a href="shoppingcart"><span id="shoppingcart-count"></span><span
                            class="glyphicon glyphicon-shopping-cart"></span> Shopping Cart</a></li>
                <li id="nav-username-item"><span id="nav-username"></span></li>
                <li><a href="login"><span class="glyphicon glyphicon-log-in"></span><button id="logout-btn"
                            class="btn-link">Log Out</button></a></li>
            </ul>
        </div>
    </nav>
    <div class="container admin-panel-body">
        <div class="admin-panel-user">
            <!-- search for specific user -->
            <div class="row ">
                <h2 class="admin-panel-title col-md-4">Users</h2>
                <!-- <div class="admin-panel-search-box col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for..." id="search-user">
                    </div>
                </div> -->
                <hr class="line-black admin-panel-line-separator">
            </div>
            <table id="admin-user-table" class="table display" style="width:100%">
                <thead>
                    <tr>
                        <th scope="col admin-panel-user-userid-col">#</th>
                        <th scope="col">Username</th>
                        <th scope="col">Email</th>
                        <th scope="col">Contact</th>
                        <th scope="col">Role</th>
                        <th scope="col">Profile-pic</th>
                        <th scope="col">Created-at</th>
                        <th scope="col">Edit</th>
                    </tr>
                </thead>
                <tbody id="admin-panel-user-items"></tbody>
            </table>
        </div>
        <div class="admin-panel-airport">
            <div class="row">
                <h2 class="admin-panel-title col-md-4">Airports</h2>
                <!-- <div class="admin-panel-search-box col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for..." id="search-airports">
                    </div>
                </div> -->
                <hr class="line-black admin-panel-line-separator">
            </div>
            <table id="admin-airport-table" class="table display" style="width:100%">
                <thead>
                    <tr>
                        <th scope="col admin-panel-airport-airportid-col">#</th>
                        <th scope="col">Airport Country</th>
                        <th scope="col">Airport Name</th>
                        <th scope="col">Airport Description</th>
                        <th scope="col">Edit</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody id="admin-panel-airport-items"></tbody>
            </table>
            <!-- Add a button to make a modal for adding airports -->
            <button id="admin-panel-airport-add-btn" type="button" class="btn btn-primary" data-toggle="modal"
                data-target="#add-airport-modal">
                Add Airport
            </button>
        </div>
        <div class="admin-panel-flights">
            <div class="row">
                <h2 class="admin-panel-title col-md-4">Flights</h2>
                <div class="admin-panel-search-box col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for..." id="search-flights">
                    </div>
                </div>
                <hr class="line-black admin-panel-line-separator">
            </div>
            <table class="table admin-flight-table">
                <thead>
                    <tr>
                        <th scope="col admin-panel-flight-flightid-col">#</th>
                        <th scope="col">FlightCode</th>
                        <th scope="col">Aircraft</th>
                        <th scope="col">OriginCountry</th>
                        <th scope="col">OriginAirport</th>
                        <th scope="col">DestinationCountry</th>
                        <th scope="col">DestinationAirport</th>
                        <th scope="col">EmbarkTime</th>
                        <th scope="col">TravelTime</th>
                        <th scope="col">ArrivalTime</th>
                        <th scope="col">Price</th>
                        <th scope="col">FlightseatPic</th>
                    </tr>
                </thead>
                <tbody id="admin-panel-flight-items"></tbody>

            </table>
            <!-- Add a button to make a modal for adding flights -->
            <button id="admin-panel-flight-add-btn" type="button" class="btn btn-primary" data-toggle="modal"
                data-target="#add-flight-modal">
                Add Flights
            </button>
        </div>
        <div class="admin-panel-promotions">
            <div class="row">
                <h2 class="admin-panel-title col-md-4">Promotions</h2>
                <!-- <div class="admin-panel-search-box col-md-4">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for..." id="search-promotions">
                    </div>
                </div> -->
                <hr class="line-black admin-panel-line-separator">
            </div>
            <table id="admin-promotion-table" class="table">
                <thead>
                    <tr>
                        <th scope="col admin-panel-promotion-promotionid-col">#</th>
                        <th scope="col">Promotion Start date</th>
                        <th scope="col">Promotion End date</th>
                        <th scope="col">Discount</th>
                        <th scope="col">Involved Flightids</th>
                        <th scope="col">Promotion Code</th>
                        <th scope="col">Delete</th>
                    </tr>
                </thead>
                <tbody id="admin-panel-promotion-items"></tbody>
            </table>
            <!-- Add a button to make a modal for adding promotions -->
            <button id="admin-panel-promotion-add-btn" type="button" class="btn btn-primary" data-toggle="modal"
                data-target="#add-promotion-modal">
                Add Promotions
            </button>
        </div>
        <!-- Modal for adding flights -->
        <div class="modal fade" id="add-flight-modal" tabindex="-1" role="dialog"
            aria-labelledby="add-flight-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-flight-modal-label">Add Flight</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form id="add-flight-form">
                            <div class="form-group">
                                <label for="flight-code">Flight Code</label>
                                <input type="text" class="form-control" id="flight-code"
                                    placeholder="Enter Flight Code">
                            </div>
                            <div class="form-group">
                                <label for="aircraft">Aircraft</label>
                                <input type="text" class="form-control" id="aircraft" placeholder="Enter Aircraft">
                            </div>
                            <div class="form-group">
                                <label for="origin-airport">Origin Airport</label>
                                <!-- dropdown for users to select airports -->
                                <select class="form-control" id="origin-airport-dropdown">
                                    <option value="">Select Airport</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="destination-airport">Destination Airport</label>
                                <!-- dropdown for users to select airports -->
                                <select class="form-control" id="destination-airport-dropdown">
                                    <option value="">Select Airport</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="embark-time">Embark Time</label>
                                <!-- let user choose datetime -->
                                <input type="datetime-local" class="form-control" id="embark-time"
                                    placeholder="Enter Embark Time">
                            </div>
                            <div class="form-group">
                                <label for="travel-time">Travel Time</label>
                                <!-- let user choose time without the am/pm -->
                                <input type="text" class="form-control" id="travel-time" placeholder="hour:minute">
                            </div>
                            <div class="form-group">
                                <label for="price">Price</label>
                                <input type="text" class="form-control" id="price" placeholder="Enter Price">
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="add-flight-btn">Add Flight</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for adding airports -->
        <div class="modal fade" id="add-airport-modal" tabindex="-1" role="dialog"
            aria-labelledby="add-airport-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-airport-modal-label">Add Airport</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label for="airport-country">Airport Country</label>
                                <input type="text" class="form-control" id="airport-country" placeholder="Country">
                            </div>
                            <div class="form-group">
                                <label for="airport-name">Airport Name</label>
                                <input type="text" class="form-control" id="airport-name" placeholder="Name">
                            </div>
                            <div class="form-group">
                                <label for="airport-description">Airport Description</label>
                                <textarea class="form-control" id="airport-description" rows="3"
                                    placeholder="Description"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="add-airport-btn">Add Airport</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal for success message -->
        <div class="modal fade" id="add-airport-success-modal" tabindex="-1" role="dialog"
            aria-labelledby="add-airport-success-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-airport-success-modal-label">Success</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-success-body">
                            <p>Airport added successfully!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- Modal for error message -->
        <div class="modal fade" id="add-airport-error-modal" tabindex="-1" role="dialog"
            aria-labelledby="add-airport-error-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-airport-error-modal-label">Error</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-error-body">
                            <p>Error adding airport! Check that the airport name is unique!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for editing user information -->
        <div class="modal fade" id="edit-user-modal" tabindex="-1" role="dialog" aria-labelledby="edit-user-modal-label"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="edit-user-modal-label">Edit User</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label for="edit-user-name">Name</label>
                                <input type="text" class="form-control" id="edit-user-name" placeholder="Name">
                            </div>
                            <div class="form-group">
                                <label for="edit-user-email">Email</label>
                                <input type="text" class="form-control" id="edit-user-email" placeholder="Email">
                            </div>
                            <div class="form-group">
                                <label for="edit-user-email">Contact</label>
                                <input type="text" class="form-control" id="edit-user-contact" placeholder="Contact">
                            </div>
                            <!-- dropdown for selecting of roles: customer or admin -->
                            <div class="form-group">
                                <label for="edit-user-role">Role</label>
                                <select class="form-control" id="edit-user-role">
                                    <option value="Customer">Customer</option>
                                    <option value="Admin">Admin</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="edit-user-btn">Save changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal for editing airport information -->
        <div class="modal fade" id="admin-panel-airport-edit-modal" tabindex="-1" role="dialog"
            aria-labelledby="edit-airport-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="edit-airport-modal-label">Edit Airport</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label for="edit-airport-country">Airport Country</label>
                                <input type="text" class="form-control" id="edit-airport-country" placeholder="Country">
                            </div>
                            <div class="form-group">
                                <label for="edit-airport-name">Airport Name</label>
                                <input type="text" class="form-control" id="edit-airport-name" placeholder="Name">
                            </div>
                            <div class="form-group">
                                <label for="edit-airport-description">Airport Description</label>
                                <textarea class="form-control" id="edit-airport-description" rows="3"
                                    placeholder="Description"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="edit-airport-btn">Edit Airport</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for confirming if the user really wants to delete airport entry -->
        <div class="modal fade" id="admin-panel-airport-delete-modal" tabindex="-1" role="dialog"
            aria-labelledby="delete-airport-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="delete-airport-modal-label">Delete Airport</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-delete-body">
                            <p>Are you sure you want to delete this airport?</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="delete-airport-btn">Delete Airport</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for telling user that the delete request failed -->
        <div class="modal fade" id="admin-panel-airport-delete-error-modal" tabindex="-1" role="dialog"
            aria-labelledby="delete-airport-error-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="delete-airport-error-modal-label">Error</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-error-body">
                            <p>Error deleting airport!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for telling user that the deletion of the airport is successful -->
        <div class="modal fade" id="admin-panel-airport-delete-success-modal" tabindex="-1" role="dialog"
            aria-labelledby="delete-airport-success-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="delete-airport-success-modal-label">Success</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-success-body">
                            <p>Airport deleted successfully!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for failure to add flights -->
        <div class="modal fade" id="add-flight-error-modal-travelTime" tabindex="-1" role="dialog"
            aria-labelledby="add-flight-error-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-flight-error-modal-label">Error</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-error-body">
                            <p>Error adding flight! Please check that the travel Time is in HH:MM format!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for success to adding flights -->
        <div class="modal fade" id="add-flight-success-modal" tabindex="-1" role="dialog"
            aria-labelledby="add-flight-success-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-flight-success-modal-label">Success</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-success-body">
                            <p>Flight added successfully!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal for failure to add flights -->
        <div class="modal fade" id="add-flight-error-modal" tabindex="-1" role="dialog"
            aria-labelledby="add-flight-error-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="add-flight-error-modal-label">Error</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-error-body">
                            <p>Error adding flight! Please check that all options are filled up!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal to upload flightseat file image -->
        <div class="modal fade" id="upload-flightseat-file-modal" tabindex="-1" role="dialog"
            aria-labelledby="upload-flightseat-file-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="upload-flightseat-file-modal-label">Upload Flight Seat File</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-body">
                            <div>
                                <div class="form-group">
                                    <label for="upload-flightseat-file-input">Upload Flight Seat File</label>
                                    <input type="file" class="form-control-file" id="upload-flightseat-file-input"
                                        name="upload-flightseat-file-input">
                                </div>
                                <button type="submit" class="btn btn-primary"
                                    id="upload-flightseat-image-btn">Upload</button>
                            </div>
                        </div>
                        <!-- <div class="modal-body">
                            <div>
                                <div class="form-group">
                                    <label for="upload-flightseat-file-input">Old Image</label>
                                    <img id="flight-detail-seat-image">
                            </div>
                        </div> -->
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal to show image upload error -->
        <div class="modal fade" id="upload-flightseat-file-error-modal" tabindex="-1" role="dialog"
            aria-labelledby="upload-flightseat-file-error-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="upload-flightseat-file-error-modal-label">Error</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-error-body">
                            <p>Error uploading flight seat image! Please check that the file is in .png or .jpg format!
                            </p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal to show upload success -->
        <div class="modal fade" id="upload-flightseat-file-success-modal" tabindex="-1" role="dialog"
            aria-labelledby="upload-flightseat-file-success-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="upload-flightseat-file-success-modal-label">Success</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-success-body">
                            <p>Flight seat image uploaded successfully!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal to edit flights -->
        <div class="modal fade" id="edit-flight-modal" tabindex="-1" role="dialog"
            aria-labelledby="edit-flight-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="edit-flight-modal-label">Edit Airport</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label for="edit-flight-id">Flight Code</label>
                                <input type="text" class="form-control" id="edit-flight-code" placeholder="Flight Code">
                            </div>
                            <div class="form-group">
                                <label for="edit-flight-departure-airport">Aircraft</label>
                                <input type="text" class="form-control" id="edit-flight-aircraft"
                                    placeholder="Aircraft">
                            </div>
                            <div class="form-group">
                                <label for="edit-flight-arrival-airport">Origin Airport</label>
                                <select class="form-control" id="edit-origin-airport-dropdown">
                                    <option value="">Select Airport</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="edit-flight-departure-time">Destination Airport</label>
                                <select class="form-control" id="edit-destination-airport-dropdown">
                                    <option value="">Select Airport</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="edit-flight-arrival-time">Embark Date</label>
                                <input type="text" class="form-control" id="edit-flight-embarktime"
                                    placeholder="Arrival Time">
                            </div>
                            <div class="form-group">
                                <label for="edit-flight-travel-time">Travel Time</label>
                                <input type="text" class="form-control" id="edit-flight-travel-time"
                                    placeholder="Travel Time">
                            </div>
                            <div class="form-group">
                                <label for="edit-flight-price">Price</label>
                                <input type="text" class="form-control" id="edit-flight-price" placeholder="Price">
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="edit-flight-submit">Edit flight</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal to show edit flight success -->
        <div class="modal fade" id="edit-flight-success-modal" tabindex="-1" role="dialog"
            aria-labelledby="edit-flight-success-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="edit-flight-success-modal-label">Success</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-success-body">
                            <p>Flight edited successfully!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- modal to show edit flight error -->
        <div class="modal fade" id="edit-flight-error-modal" tabindex="-1" role="dialog"
            aria-labelledby="edit-flight-error-modal-label" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="edit-flight-error-modal-label">Error</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="modal-error-body">
                            <p>Error editing flight! Please check that all options are filled up!</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to confirm delete flights -->
    <div class="modal fade" id="flight-delete-modal" tabindex="-1" role="dialog"
        aria-labelledby="delete-flight-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-flight-modal-label">Delete Flight</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-body">
                        <p>Are you sure you want to delete this flight?</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                    <button type="button" class="btn btn-primary" id="delete-flight-submit">Yes</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to add promotions -->
    <div class="modal fade" id="add-promotion-modal" tabindex="-1" role="dialog" aria-labelledby="promotion-modal-label"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="promotion-modal-label">Add Promotion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="promotion-start-date">*Promotion Start Date</label>
                            <input type="date" class="form-control" id="promotion-start-date"
                                placeholder="Promotion Start Date">

                        </div>
                        <div class="form-group">
                            <label for="promotion-end-date">*Promotion End Date</label>
                            <input type="date" class="form-control" id="promotion-end-date"
                                placeholder="Promotion End Date">
                        </div>
                        <div class="form-group">
                            <label for="promotion-price">*Discount offered</label>
                            <input type="text" class="form-control" id="promotion-discountoffered"
                                placeholder="Discount (%)">
                        </div>
                        <!-- select the flights that are added to promotion -->
                        <div class="form-group">
                            <label for="promotion-price">*Promotion Code</label>
                            <input type="text" class="form-control" id="promotion-code" placeholder="Promotion Code">
                        </div>
                        <div class="form-group">
                            <label for="promotion-flights">Flights</label>
                            <!-- tick boxes to select flights -->
                            <div class="form-check promotion-flight-items">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="add-promotion-submit">Add Promotion</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to ask user if they want to delete promotion delete-promotion-modal delete-promotion-submit-->
    <div class="modal fade" id="delete-promotion-modal" tabindex="-1" role="dialog"
        aria-labelledby="delete-promotion-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-promotion-modal-label">Delete Promotion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-body">
                        <p>Are you sure you want to delete this promotion?</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                    <button type="button" class="btn btn-primary" id="delete-promotion-submit">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show error in adding promotions -->
    <div class="modal fade" id="add-promotion-error-modal" tabindex="-1" role="dialog"
        aria-labelledby="add-promotion-error-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="add-promotion-error-modal-label">Error</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-error-body">
                        <p>Error adding promotion! Please check that all required options are filled up!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show success in adding promotions -->
    <div class="modal fade" id="add-promotion-success-modal" tabindex="-1" role="dialog"
        aria-labelledby="add-promotion-success-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="add-promotion-success-modal-label">Success</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-success-body">
                        <p>Promotion added successfully!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show success for deleting promotions -->
    <div class="modal fade" id="delete-promotion-success-modal" tabindex="-1" role="dialog"
        aria-labelledby="delete-promotion-success-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-promotion-success-modal-label">Success</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-success-body">
                        <p>Promotion deleted successfully!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show error in deleting promotions -->
    <div class="modal fade" id="delete-promotion-error-modal" tabindex="-1" role="dialog"
        aria-labelledby="delete-promotion-error-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-promotion-error-modal-label">Error</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-error-body">
                        <p>Error deleting promotion!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show success in deleting promotions -->
    <div class="modal fade" id="delete-promotion-success-modal" tabindex="-1" role="dialog"
        aria-labelledby="delete-promotion-success-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="delete-promotion-success-modal-label">Success</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-success-body">
                        <p>Promotion deleted successfully!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to let users edit promotions -->
    <div class="modal fade" id="edit-promotion-modal" tabindex="-1" role="dialog"
        aria-labelledby="edit-promotion-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="edit-promotion-modal-label">Edit Promotion</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-body-edit-promotion">
                        <div>
                            <div class="form-group">
                                <label id="edit-promotion-start-date-label" for="edit-promotion-start-date">Start
                                    Date</label>
                                <input type="date" class="form-control" id="edit-promotion-start-date">
                            </div>
                            <div class="form-group">
                                <label id="edit-promotion-end-date-label" for="edit-promotion-end-date">End Date</label>
                                <input type="date" class="form-control" id="edit-promotion-end-date">
                            </div>
                            <div class="form-group">
                                <label for="edit-promotion-discount">Discount</label>
                                <input type="number" class="form-control" id="edit-promotion-discount"
                                    placeholder="Enter discount">
                            </div>
                            <div class="form-group">
                                <label for="promotion-price">*Promotion Code</label>
                                <input type="text" class="form-control" id="edit-promotion-code"
                                    placeholder="Promotion Code">
                            </div>
                            <div class="form-group">
                                <label for="promotion-flights">Flights</label>
                                <!-- tick boxes to select flights -->
                                <div class="form-check promotion-flight-items">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="edit-promotion-submit">Submit</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show error in editing users -->
    <div class="modal fade" id="edit-user-error-modal" tabindex="-1" role="dialog"
        aria-labelledby="edit-user-error-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="edit-promotion-error-modal-label">Error</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-error-body">
                        <p>Error editing User!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show success in editing users -->
    <div class="modal fade" id="edit-user-success-modal" tabindex="-1" role="dialog"
        aria-labelledby="edit-user-success-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="edit-user-success-modal-label">Success</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-success-body">
                        <p>User edited successfully!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show error in editing promotions -->
    <div class="modal fade" id="edit-promotion-error-modal" tabindex="-1" role="dialog"
        aria-labelledby="edit-promotion-error-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="edit-promotion-error-modal-label">Error</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-error-body">
                        <p>Error editing promotion!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal to show success in editing promotions -->
    <div class="modal fade" id="edit-promotion-success-modal" tabindex="-1" role="dialog"
        aria-labelledby="edit-promotion-success-modal-label" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="edit-promotion-success-modal-label">Success</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="modal-success-body">
                        <p>Promotion edited successfully!</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-clean">
        <footer>
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-sm-4 col-md-3 item">
                        <h3>Services</h3>
                        <ul>
                            <li><a href="#">Web design</a></li>
                            <li><a href="#">Development</a></li>
                            <li><a href="#">Hosting</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-4 col-md-3 item">
                        <h3>About</h3>
                        <ul>
                            <li><a href="#">Company</a></li>
                            <li><a href="#">Team</a></li>
                            <li><a href="#">Legacy</a></li>
                        </ul>
                    </div>
                    <div class="col-sm-4 col-md-3 item">
                        <h3>Careers</h3>
                        <ul>
                            <li><a href="#">Job openings</a></li>
                            <li><a href="#">Employee success</a></li>
                            <li><a href="#">Benefits</a></li>
                        </ul>
                    </div>
                    <div class="col-lg-3 item social"><a href="#"><i class="icon ion-social-facebook"></i></a><a
                            href="#"><i class="icon ion-social-twitter"></i></a><a href="#"><i
                                class="icon ion-social-snapchat"></i></a><a href="#"><i
                                class="icon ion-social-instagram"></i></a>
                        <p class="copyright">SP AIR © 2022</p>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</body>
<script>
    $(document).ready(() => {
        // on load page, check to see if user has token in local storage
        var token = localStorage.getItem("token");
        var userid = localStorage.getItem("userid");
        // make a function to edit user info
        if (!token) {
            // if no token, redirect to login page
            window.location.href = "http://localhost:3000/login";
        } else {
            // if token, get user info
            $.ajax({
                url: "http://localhost:3000/api/user/" + userid,
                type: "GET",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": "Bearer " + token,
                },
                contentType: "application/json",
                success: function (data) {
                    // if user has token, get user info
                    // alert(JSON.stringify(data));
                    if (data.role !== "Admin") {
                        // if user is admin, show admin panel
                        window.location.href = "http://localhost:3000/login";
                        return
                    } else {
                        $('.adminpanel-html-body').css('visibility', 'visible');
                    }
                    $("#username").html(data.username);
                    $("#nav-username").html('<img id="profile-pic"> ' + '<a href="profile">' + data.username + '</a>');
                    // alert(data.profile_pic_url)  
                    var profile_pic_url = data.profile_pic_url;
                    // alert(pro)
                    if (profile_pic_url == null) {
                        var profile_pic = "pfp_default.png";
                    } else {
                        var profile_pic = profile_pic_url.split("\\")[2];
                    }
                    // alert(profile_pic);
                    $("#profile-pic").attr("src", "images/" + profile_pic);
                    $("#profile-panel-pic").attr("src", "images/" + profile_pic);
                    $("#email").html('<div>Email: ' + data.email + '</div>');
                    $("#profile_pic_url").html(data.profile_pic_url);
                    $("#created_at").html('<div>Created account at: ' + data.created_at + '</div>');
                    // hide sign up and login buttons
                    $("#nav-right-btn").hide();
                    $.ajax({
                        url: "http://localhost:3000/api/shoppingcart/" + userid,
                        type: "GET",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        success: function (data) {
                            // if user has token, get user info
                            $("#shoppingcart-count").html(data.length);
                        },
                        error: function (data) {
                            $("#shoppingcart-count").html("0");
                        }
                    })
                },
                error: function (data) {
                    // if the token is invalid, redirect to login page
                    // alert(JSON.stringify(data))
                    window.location.href = "http://localhost:3000/login";
                }
            });
            // get all users
            $.ajax(
                {
                    url: "http://localhost:3000/api/users",
                    type: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + token,
                    },
                    contentType: "application/json",
                    success: function (data) {
                        // get length of the array
                        var user_list = "";
                        for (var i = 0; i < data.length; i++) {
                            // for each user, get their info
                            var user = data[i];
                            var user_id = user.id;
                            var user_username = user.username;
                            var user_email = user.email;
                            var user_role = user.role;
                            var user_contact = user.contact;
                            var user_profilepic = user.profile_pic_url;
                            if (user_profilepic == null) {
                                var profile_pic = "pfp_default.png";
                            } else {
                                var profile_pic = user_profilepic.split("\\")[2];
                            }
                            var user_created_at = user.created_at;
                            var user_item_html = '<tr>' + '<td scope="row" class="admin-panel-user-item-userid">' + user.userid + '</td>' +
                                '<td class="admin-panel-user-item-username">' + user_username + '</td>' +
                                '<td class="admin-panel-user-item-email">' + user_email + '</td>' +
                                '<td class="admin-panel-user-item-contact">' + user_contact + '</td>' +
                                '<td class="admin-panel-user-item-role">' + user_role + '</td>' +
                                '<td>' + '<a class="btn btn-success" href="images/' + profile_pic + '">Profile Pic</a>' + '</td>' +
                                '<td>' + user_created_at + '</td>' +
                                '<td class="admin-panel-user-item-edit">' + '<a class="btn btn-warning admin-panel-user-edit-btn" >Edit</a>' + '</td>' +
                                '</tr>';
                            $("#admin-panel-user-items").append(user_item_html);
                            // if i == 10, break and display a button to load more users, 
                            // when user clicks the button, load more users
                        }
                        $('#admin-user-table').DataTable({
                            "columns": [
                                { "data": "id" },
                                { "data": "username" },
                                { "data": "email" },
                                { "data": "contact" },
                                { "data": "role" },
                                { "data": "profile_pic" },
                                { "data": "created_at" },
                                { "data": "edit" }
                            ],
                        })
                    },
                    error: function (data) {
                        // if the token is invalid, redirect to login page
                        // alert(JSON.stringify(data) + "user")
                        window.location.href = "http://localhost:3000/login";
                    }
                }
            );
            // get all airports
            $.ajax(
                {
                    url: "http://localhost:3000/api/airport",
                    type: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + token,
                    },
                    contentType: "application/json",
                    success: function (data) {
                        // get length of the array
                        var airport_list = "";
                        for (var i = 0; i < data.length; i++) {
                            // for each user, get their info
                            var airports = data[i];
                            var airport_id = airports.airportid;
                            var airport_name = airports.airport_name;
                            var airport_country = airports.airport_country;
                            var airport_description = airports.airport_description;
                            var user_item_html = '<tr>' + '<th scope="row" class="admin-panel-airport-item-id">' + airport_id + '</th>' +
                                '<td class="admin-panel-airport-item-username">' + airport_country + '</td>' +
                                '<td class="admin-panel-airport-item-email">' + airport_name + '</td>' +
                                '<td class="admin-panel-airport-item-description">' + airport_description + '</td>' +
                                '<td class="admin-panel-airport-item-edit">' + '<a class="btn btn-warning admin-panel-airport-edit-btn" >Edit</a>' + '</td>' + '<td id="admin-panel-airport-item-delete">' + '<button class="btn btn-danger admin-panel-airport-delete-btn">Delete</button>' + '</td>' +
                                '</tr>';
                            var originairporthtml = '<option value="' + airport_id + "_" + airport_country + "_" + airport_name + '">' + airport_name + '</option>';
                            var destinationairporthtml = '<option value="' + airport_id + "_" + airport_country + "_" + airport_name + '">' + airport_name + '</option>';
                            $("#admin-panel-airport-items").append(user_item_html);
                            $("#origin-airport-dropdown").append(originairporthtml);
                            $("#edit-origin-airport-dropdown").append(originairporthtml);
                            $("#edit-destination-airport-dropdown").append(originairporthtml);
                            $("#destination-airport-dropdown").append(destinationairporthtml);
                            // if i == 10, break and display a button to load more users, 
                            // when user clicks the button, load more users
                        }
                        $('#admin-airport-table').DataTable({
                            "columns": [
                                { "data": "id" },
                                { "data": "country" },
                                { "data": "name" },
                                { "data": "description" },
                                { "data": "edit" },
                                { "data": "delete" }
                            ],
                        })
                    },
                    error: function (data) {
                        // if the token is invalid, redirect to login page
                        // alert(JSON.stringify(data) + "airport")
                        window.location.href = "http://localhost:3000/login";
                    }
                });
            // get all flights
            $.ajax(
                {
                    url: "http://localhost:3000/api/flights",
                    type: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + token,
                    },
                    contentType: "application/json",
                    success: function (data) {
                        // get length of the array
                        var flight_list = "";
                        for (var i = 0; i < data.length; i++) {
                            // for each user, get their info
                            var flights = data[i];
                            var flight_id = flights.flightid;
                            var flight_code = flights.flightCode;
                            var flight_aircraft = flights.aircraft;
                            var flight_originCountry = flights.originCountry;
                            var flight_originAirport = flights.originAirport;
                            var flight_destinationCountry = flights.destinationCountry;
                            var flight_destinationAirport = flights.destinationAirport;
                            var flight_embarkDate = flights.embarkDate;
                            var flight_embarkTime = flights.embarkTime;
                            var flight_embarkdatetime = flights.embarkDate + " " + flights.embarkTime;
                            var flight_travelTime = flights.travelTime;
                            var flight_travelTimeHM = (flights.travelTime).split(":")[0] + "h " + (flights.travelTime).split(":")[1] + "m";
                            var totalTravelTimeMinutes = parseInt(flight_travelTime.split(":")[1]) + (parseInt(flight_travelTime.split(":")[0]) * 60);
                            var reachDate = new Date(flight_embarkDate + " " + flight_embarkTime);
                            var reachTime = new Date(reachDate.getTime() + totalTravelTimeMinutes * 60000);
                            reachDate = reachDate.getFullYear() + "-" + (reachDate.getMonth() + 1) + "-" + reachDate.getDate() + " " + reachTime.getHours() + ":" + reachTime.getMinutes()
                            var flight_price = flights.price;
                            var flightseat_url = flights.flightseat_pic_url;
                            var user_item_html = '<tr>' + '<th scope="row" class="admin-panel-flight-item-id">' + flight_id + '</th>' +
                                '<td class="admin-panel-flight-item-flightcode">' + flight_code + '</td>' +
                                '<td class="admin-panel-flight-item-aircraft">' + flight_aircraft + '</td>' +
                                '<td class="admin-panel-flight-item-origincountry">' + flight_originCountry + '</td>' +
                                '<td class="admin-panel-flight-item-originairport">' + flight_originAirport + '</td>' +
                                '<td class="admin-panel-flight-item-destinationcountry">' + flight_destinationCountry + '</td>' +
                                '<td class="admin-panel-flight-item-destinationairport">' + flight_destinationAirport + '</td>' +
                                '<td class="admin-panel-flight-item-embarkdate">' + flight_embarkdatetime + '</td>' +
                                '<td class="admin-panel-flight-item-traveltime">' + flight_travelTimeHM + '</td>' +
                                '<td class="admin-panel-flight-item-reachdate">' + reachDate + '</td>' +
                                '<td class="admin-panel-flight-item-price">' + flight_price + '</td>' +
                                '<td class="admin-panel-flight-item-flightseat">' + '<a class="btn btn-success admin-panel-flight-flightseat-btn" >change</a>' + '</td>' +
                                '<td class="admin-panel-flight-item-edit">' + '<a class="btn btn-warning admin-panel-flight-edit-btn" >Edit</a>' + '</td>' +
                                '<td id="admin-panel-flight-item-delete">' + '<button class="btn btn-danger admin-panel-flight-delete-btn">Delete</button>' + '</td>' +
                                '</tr>';
                            $("#admin-panel-flight-items").append(user_item_html);
                            // <input class="form-check-input" type="checkbox" value="">
                            //     <label class="form-check-label" for="promotion-flights">Flight 1</label>
                            var promotionflightitemhtml = '<div><input class="form-check-input promotion-flight-checkbox" type="checkbox" value="' + flight_id + '">' +
                                '<label class="form-check-label" for="promotion-flights">' + flight_code + " " + flight_originAirport + " > " + flight_destinationAirport + " - " + flight_embarkdatetime + '</label></div>';
                            $(".promotion-flight-items").append(promotionflightitemhtml);
                            $("#flight-detail-seat-image").attr("src", "images/" + flightseat_url.split("\\")[2]);
                        }
                    },
                    error: function (data) {
                        // if the token is invalid, redirect to login page
                        // alert(JSON.stringify(data))
                    }
                })
            // get all promotions
            $.ajax(
                {
                    url: "http://localhost:3000/api/promotions/get",
                    type: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "Authorization": "Bearer " + token,
                    },
                    contentType: "application/json",
                    success: function (promotioninfo) {
                        // get all the promotions from tnsf
                        $.ajax({
                            url: "http://localhost:3000/api/promotiontnsf/get",
                            type: "GET",
                            headers: {
                                "Content-Type": "application/json",
                                "Authorization": "Bearer " + token,
                            },
                            contentType: "application/json",
                            success: function (data) {
                                // find all the flightids in the data
                                // alert(JSON.stringify(data));
                                // [{"promotransferid":1,"fk_promotionid":1,"fk_flightid":1},{"promotransferid":2,"fk_promotionid":1,"fk_flightid":2},{"promotransferid":3,"fk_promotionid":1,"fk_flightid":3}]
                                // alert(JSON.stringify(promoflightids));
                                // alert(JSON.stringify(promotioninfo))
                                var promotion_list = "";
                                for (var i = 0; i < promotioninfo.length; i++) {
                                    var flightids = [];
                                    for (var j = 0; j < data.length; j++) {
                                        var promoid = data[j].fk_promotionid;
                                        var promotioninfoid = promotioninfo[i].promotionid;
                                        // alert(promoid + " " + promotioninfoid);
                                        var flightid = data[j].fk_flightid;
                                        if (promoid == promotioninfoid) {
                                            flightids.push(flightid);
                                        }
                                    }
                                    // alert(flightids)
                                    // for each user, get their info
                                    var promotions = promotioninfo[i];
                                    var promotion_id = promotions.promotionid;
                                    var promotion_startDate = promotions.promotionstartdate;
                                    var promotion_endDate = promotions.promotionenddate;
                                    var promotion_discount = promotions.discountoffered;
                                    var promotion_code = promotions.promotioncode;
                                    var user_item_html = '<tr>' + '<th scope="row" class="admin-panel-promotion-item-id">' + promotion_id + '</th>' +
                                        '<td class="admin-panel-promotion-item-startdate">' + promotion_startDate + '</td>' +
                                        '<td class="admin-panel-promotion-item-enddate">' + promotion_endDate + '</td>' +
                                        '<td class="admin-panel-promotion-item-discount">' + promotion_discount + '%' + '</td>' +
                                        '<td class="admin-panel-promotion-item-flightinvolved">' + flightids + '</td>' +
                                        '<td class="admin-panel-promotion-item-promotioncode">' + promotion_code + '</td>' +
                                        // '<td class="admin-panel-promotion-item-edit">' + '<a class="btn btn-warning admin-panel-promotion-edit-btn" >Edit</a>' + '</td>' +
                                        '<td id="admin-panel-promotion-item-delete">' + '<a class="btn btn-danger admin-panel-promotion-delete-btn">Delete</a>' + '</td>' +
                                        '</tr>';
                                    $("#admin-panel-promotion-items").append(user_item_html);
                                }
                                $('#admin-promotion-table').DataTable({
                                    "column": {
                                        "orderable": false
                                    }
                                })
                            }
                        })
                    }
                }
            )
        }
        $(document).on("click", ".admin-panel-user-edit-btn", function () {
            var userid = $(this).closest('tr').find('.admin-panel-user-item-userid').text(); 
            var username = $(this).closest('tr').find('.admin-panel-user-item-username').text();
            var email = $(this).closest('tr').find('.admin-panel-user-item-email').text();
            var contact = $(this).closest('tr').find('.admin-panel-user-item-contact').text();
            var role = $(this).closest('tr').find('.admin-panel-user-item-role').text();
            $("#edit-user-name").val(username);
            $("#edit-user-email").val(email);
            $("#edit-user-contact").val(contact);
            $("#edit-user-modal").modal("show");
            $("#edit-user-btn").click(function () {
                var username = $("#edit-user-name").val();
                var email = $("#edit-user-email").val();
                var contact = $("#edit-user-contact").val();
                var role = $("#edit-user-role").val();
                var user_data = {
                    "username": username,
                    "email": email,
                    "contact": contact,
                    "role": role
                }
                $.ajax(
                    {
                        url: "http://localhost:3000/api/user/admin/edit/" + userid,
                        type: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify(user_data),
                        success: function (data) {
                            $("#edit-user-modal").modal("hide");
                            $("#edit-user-success-modal").modal("show");
                            window.location.reload();
                        },
                        error: function (data) {
                            $("#edit-user-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-airport-edit-btn", function () {
            var airport_id = $(this).closest('tr').find('.admin-panel-airport-item-id').text();
            var airport_country = $(this).closest('tr').find('.admin-panel-airport-item-username').text();
            var airport_name = $(this).closest('tr').find('.admin-panel-airport-item-email').text();
            var airport_description = $(this).closest('tr').find('.admin-panel-airport-item-description').text();
            $("#edit-airport-country").val(airport_country);
            $("#edit-airport-name").val(airport_name);
            $("#edit-airport-description").val(airport_description);
            $("#admin-panel-airport-edit-modal").modal("show");
            $("#edit-airport-btn").click(function () {
                var airport_country = $("#edit-airport-country").val();
                var airport_name = $("#edit-airport-name").val();
                var airport_description = $("#edit-airport-description").val();
                var airport_data = {
                    airport_name: airport_name,
                    airport_country: airport_country,
                    airport_description: airport_description,
                }
                $.ajax(
                    {
                        url: "http://localhost:3000/api/airport/put/" + airport_id,
                        type: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify(airport_data),
                        success: function (data) {
                            $("#admin-panel-airport-edit-modal").modal("hide");
                            $("#add-airport-success-modal").modal("show");
                            window.location.reload();
                        },
                        error: function (data) {
                            $("#admin-panel-airport-edit-modal").modal("hide");
                            $("#add-airport-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-airport-delete-btn", function () {
            var airport_id = $(this).closest('tr').find('.admin-panel-airport-item-id').text();
            $("#admin-panel-airport-delete-modal").modal("show");
            $("#delete-airport-btn").click(function () {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/airport/delete/" + airport_id,
                        type: "DELETE",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({ airportid: airport_id }),
                        success: function (data) {
                            $("#admin-panel-airport-delete-modal").modal("hide");
                            $("#admin-panel-airport-delete-success-modal").modal("show");
                            setTimeout(function () {
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            $("#admin-panel-airport-delete-modal").modal("hide");
                            $("#admin-panel-airport-delete-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-flight-edit-btn", function () {
            var flightCode = $(this).closest('tr').find('.admin-panel-flight-item-flightcode').text();
            var flightAircraft = $(this).closest('tr').find('.admin-panel-flight-item-aircraft').text();
            var originCountry = $(this).closest('tr').find('.admin-panel-flight-item-origincountry').text();
            var originAirport = $(this).closest('tr').find('.admin-panel-flight-item-originairport').text();
            var destinationCountry = $(this).closest('tr').find('.admin-panel-flight-item-destinationcountry').text();
            var destinationAirport = $(this).closest('tr').find('.admin-panel-flight-item-destinationairport').text();
            var embarkDate = $(this).closest('tr').find('.admin-panel-flight-item-embarkdate').text();
            var travelTime = $(this).closest('tr').find('.admin-panel-flight-item-traveltime').text();
            var price = $(this).closest('tr').find('.admin-panel-flight-item-price').text();
            // processing 
            var travelTimehour = travelTime.split("h")[0];
            var travelTimemin = travelTime.split("h")[1].replace("m", "").replace(" ", "");
            travelTime = travelTimehour + ":" + travelTimemin;
            $("#edit-flight-code").val(flightCode);
            $("#edit-flight-aircraft").val(flightAircraft);
            $("#edit-origin-airport-dropdown").val(originAirport);
            $("#edit-destination-airport-dropdown").val(destinationAirport);
            $("#edit-flight-embarktime").val(embarkDate);
            $("#edit-flight-travel-time").val(travelTime);
            $("#edit-flight-price").val(price);
            $("#edit-flight-modal").modal("show");
            $("#edit-flight-submit").click(function () {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/flights/put/" + airport_id,
                        type: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({ airportid: airport_id }),
                        success: function (data) {
                            $("#edit-flight-modal").modal("hide");
                            $("#edit-flight-success-modal").modal("show");
                            setTimeout(function () {
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            $("#edit-flight-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-flight-flightseat-btn", function () {
            var flightid = $(this).closest('tr').find('.admin-panel-flight-item-id').text();
            $("#upload-flightseat-file-modal").modal("show");
            $("#upload-flightseat-image-btn").click(function () {
                var file = $('#upload-flightseat-file-input').get(0).files[0];
                var newFileName = flightid + ".png";
                var form_data = new FormData();
                form_data.append('flightseat_pic', file, newFileName);
                form_data.append('flightid', flightid);
                $.ajax(
                    {
                        url: "http://localhost:3000/api/flights/flightseatpic/post/" + flightid,
                        type: "PUT",
                        headers: {
                            "Authorization": "Bearer " + token,
                        },
                        contentType: false,
                        data: form_data,
                        processData: false,
                        success: function (data) {
                            $("#upload-flightseat-file-modal").modal("hide");
                            $("#upload-flightseat-file-success-modal").modal("show");
                            setTimeout(function () {
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            $("#upload-flightseat-file-modal").modal("hide");
                            $("#upload-flightseat-file-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-flight-delete-btn", function () {
            var flightid = $(this).closest('tr').find('.admin-panel-flight-item-id').text();
            $("#flight-delete-modal").modal("show");
            $("#delete-flight-submit").click(function () {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/flights/delete/" + flightid,
                        type: "DELETE",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({ flightid: flightid }),
                        success: function (data) {
                            $("#flight-delete-modal").modal("hide");
                            $("#admin-panel-airport-delete-success-modal").modal("show");
                            setTimeout(function () {
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            $("#flight-delete-modal").modal("hide");
                            $("#admin-panel-airport-delete-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-promotion-edit-btn", function () {
            // admin-panel-promotion-item-startdate admin-panel-promotion-item-enddate admin-panel-promotion-item-discount admin-panel-promotion-item-flightinvolved admin-panel-promotion-item-enddate
            var promotionid = $(this).closest('tr').find('.admin-panel-promotion-item-id').text();
            var promotionstartdate = $(this).closest('tr').find('.admin-panel-promotion-item-startdate').text();
            var promotionenddate = $(this).closest('tr').find('.admin-panel-promotion-item-enddate').text();
            var discountoffered = $(this).closest('tr').find('.admin-panel-promotion-item-discount').text();
            var flightsinvolved = $(this).closest('tr').find('.admin-panel-promotion-item-flightinvolved').text();
            var promotioncode = $(this).closest('tr').find('.admin-panel-promotion-item-promotioncode').text();
            // alert(promotionstartdate + " " + promotionenddate + " " + discountoffered + " " + flightsinvolved + " " + promotioncode);
            // edit-promotion-start-date edit-promotion-end-date edit-promotion-discount edit-promotion-code .edit-promotion-flight-items
            // processing 
            // $("#edit-promotion-start-date").val(promotionstartdate);
            // $("#edit-promotion-end-date").val(promotionenddate);
            // alert(promotionstartdate);
            $("#edit-promotion-start-date-label").append('<p> Old date: ' + promotionstartdate + '</p>');
            $("#edit-promotion-end-date-label").append('<p> Old date: ' + promotionenddate + '</p>');
            $("#edit-promotion-discount").val(parseInt(discountoffered));
            $("#edit-promotion-code").val(promotioncode);
            $("#edit-promotion-modal").modal("show");
            $("#edit-promotion-submit").click(function () {
                var promotionstartdate = $("#edit-promotion-start-date").val();
                var promotionenddate = $("#edit-promotion-end-date").val();
                var discountoffered = $("#edit-promotion-discount").val();
                var promotioncode = $("#edit-promotion-code").val();
                var promotion_checkbox_value = [];
                for (var i = 0; i < $(".promotion-flight-checkbox").length; i++) {
                    if ($(".promotion-flight-checkbox")[i].checked) {
                        var promotion_flight_checkbox = $(".promotion-flight-checkbox")[i].value;
                        promotion_checkbox_value.push(promotion_flight_checkbox);
                    }
                }
                $.ajax(
                    {
                        url: "http://localhost:3000/api/promotions/update/" + promotionid,
                        type: "PUT",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({
                            promotionid: promotionid,
                            promotionstartdate: promotionstartdate,
                            promotionenddate: promotionenddate,
                            discountoffered: discountoffered,
                            promotioncode: promotioncode,
                        }),
                        success: function (data) {
                            var promoid = data.promotionid;
                            alert(promoid);
                            for (var j = 0; j < promotion_checkbox_value.length; j++) {
                                $.ajax(
                                    {
                                        url: "http://localhost:3000/api/promotiontnsf/post/" + promoid,
                                        type: "POST",
                                        headers: {
                                            "Content-Type": "application/json",
                                            "Authorization": "Bearer " + token,
                                        },
                                        contentType: "application/json",
                                        data: JSON.stringify({
                                            fk_promotionid: promotionid,
                                            fk_flightid: promotion_checkbox_value[j],
                                        }),
                                    }
                                );
                            }
                            $("#edit-promotion-modal").modal("hide");
                            $("#edit-promotion-success-modal").modal("show");
                            setTimeout(function () {
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            $("#edit-promotion-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        $(document).on("click", ".admin-panel-promotion-delete-btn", function () {
            var promotionid = $(this).closest('tr').find('.admin-panel-promotion-item-id').text();
            $("#delete-promotion-modal").modal("show"); //delete-promotion-modal delete-promotion-submit
            $("#delete-promotion-submit").click(function () {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/promotions/delete/" + promotionid,
                        type: "DELETE",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({ promotionid: promotionid }),
                        success: function (data) {
                            $("#delete-promotion-modal").modal("hide");
                            $("#delete-promotion-success-modal").modal("show");
                            setTimeout(function () {
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            $("#delete-promotion-modal").modal("hide");
                            $("#delete-promotion-error-modal").modal("show");
                        }
                    }
                );
            });
        });
        // $("#search-user").keyup(() => {
        //     var search_term = $("#search-user").val();
        //     $("#admin-panel-user-items tr").filter(function () {
        //         $(this).toggle($(this).text().toLowerCase().indexOf(search_term.toLowerCase()) > -1)
        //     });
        // });
        // $("#search-airports").keyup(() => {
        //     var search_term = $("#search-airports").val();
        //     $("#admin-panel-airport-items tr").filter(function () {
        //         $(this).toggle($(this).text().toLowerCase().indexOf(search_term.toLowerCase()) > -1)
        //     });
        // });
        $("#search-flights").keyup(() => {
            var search_term = $("#search-flights").val();
            $("#admin-panel-flight-items tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(search_term.toLowerCase()) > -1)
            });
        });
        // $("#search-promotions").keyup(() => {
        //     var search_term = $("#search-promotions").val();
        //     $("#admin-panel-promotion-items tr").filter(function () {
        //         $(this).toggle($(this).text().toLowerCase().indexOf(search_term.toLowerCase()) > -1)
        //     });
        // });
        $("#logout-btn").click(() => {
            localStorage.removeItem("token");
            localStorage.removeItem("userid");
            window.location.href = "http://localhost:3000/login";
        });
        // $("#admin-panel-flight-flightseat-btn")
        $("#add-airport-btn").click(() => {
            var airport_name = $("#airport-name").val();
            var airport_country = $("#airport-country").val();
            var airport_description = $("#airport-description").val();
            if (airport_name == "" || airport_country == "" || airport_description == "") {
                $("#add-airport-error-modal").modal("show");
            } else {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/airport",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({
                            airport_name: airport_name,
                            airport_country: airport_country,
                            airport_description: airport_description,
                        }),
                        success: function (data) {
                            // if post is successful, show #add-airport-success-modal, and close #add-airport-modal
                            $("#add-airport-modal").modal("hide");
                            $("#add-airport-success-modal").modal("show");
                            setTimeout(() => {
                                // refresh the page
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            // if post is unsuccessful, show #add-airport-error-modal
                            $("#add-airport-error-modal").modal("show");
                        }
                    }
                );
            }
        })
        $("#add-flight-btn").click(() => {
            var flightCode = $("#flight-code").val();
            var aircraft = $("#aircraft").val();
            // var originCountry = $("#origin-country").val();
            var originAirport = $("#origin-airport-dropdown").val();
            // var destinationCountry = $("#destination-country").val();
            var destinationAirport = $("#destination-airport-dropdown").val();
            var embarkTime = $("#embark-time").val();
            var travelTime = $("#travel-time").val();
            var price = $("#price").val();
            // processing
            var originAirportid = (originAirport).split("_")[0];
            var originCountry = (originAirport).split("_")[1];
            var originAirportName = (originAirport).split("_")[2];
            var destinationAirportid = (destinationAirport).split("_")[0];
            var destinationCountry = (destinationAirport).split("_")[1];
            var destinationAirportName = (destinationAirport).split("_")[2];
            // replace "T" inside of travelTime
            var embarkDate = embarkTime.split("T")[0];
            embarkTime = embarkTime.split("T")[1];
            // alert(flightCode + " " + aircraft + " " + originAirportid + " " + destinationAirportid + " " + embarkDate + " " + embarkTime + " " + travelTime + " " + price);
            // if travelTime isnt in the format of HH:MM, validate using regex
            if (!travelTime.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)) {
                $("#add-flight-error-modal-travelTime").modal("show");
            } else if (flightCode == "" || aircraft == "" || originAirportid == "" || originCountry == "" || originAirportName == "" || destinationAirportid == "" || destinationCountry == "" || destinationAirportName == "" || embarkDate == "" || embarkTime == "" || travelTime == "" || price == "") {
                $("#add-flight-error-modal").modal("show");
            } else {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/flights",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({
                            flightCode: flightCode,
                            aircraft: aircraft,
                            originAirport: originAirportid,
                            destinationAirport: destinationAirportid,
                            embarkDate: embarkDate,
                            embarkTime: embarkTime,
                            travelTime: travelTime,
                            price: price,
                        }),
                        success: function (data) {
                            // if post is successful, show #add-airport-success-modal, and close #add-airport-modal
                            $("#add-flight-modal").modal("hide");
                            $("#add-flight-success-modal").modal("show");
                            setTimeout(() => {
                                // refresh the page
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            // if post is unsuccessful, show #add-airport-error-modal
                            $("#add-flight-error-modal").modal("show");
                        }
                    }
                );
            }
        })
        $("#add-promotion-submit").click(() => {
            var promotion_start_date = $("#promotion-start-date").val();
            var promotion_end_date = $("#promotion-end-date").val();
            var promotion_discountoffered = $("#promotion-discountoffered").val();
            var promotion_code = $("#promotion-code").val();
            var promotion_checkbox_value = [];
            for (var i = 0; i < $(".promotion-flight-checkbox").length; i++) {
                if ($(".promotion-flight-checkbox")[i].checked) {
                    var promotion_flight_checkbox = $(".promotion-flight-checkbox")[i].value;
                    promotion_checkbox_value.push(promotion_flight_checkbox);
                }
            }
            // alert(promotion_start_date + " " + promotion_end_date + " " + promotion_discountoffered + " " +promotion_code + " "+ promotion_checkbox_value);
            if (promotion_start_date == "" || promotion_end_date == "" || promotion_discountoffered == "" || promotion_code == "") {
                $("#add-promotion-error-modal").modal("show");
            } else {
                $.ajax(
                    {
                        url: "http://localhost:3000/api/promotions/post",
                        type: "POST",
                        headers: {
                            "Content-Type": "application/json",
                            "Authorization": "Bearer " + token,
                        },
                        contentType: "application/json",
                        data: JSON.stringify({
                            promotionstartdate: promotion_start_date,
                            promotionenddate: promotion_end_date,
                            discountoffered: promotion_discountoffered,
                            promotioncode: promotion_code,
                        }),
                        success: function (data) {
                            var promotionid = data.promotionid;
                            for (var j = 0; j < promotion_checkbox_value.length; j++) {
                                $.ajax(
                                    {
                                        url: "http://localhost:3000/api/promotiontnsf/post",
                                        type: "POST",
                                        headers: {
                                            "Content-Type": "application/json",
                                            "Authorization": "Bearer " + token,
                                        },
                                        contentType: "application/json",
                                        data: JSON.stringify({
                                            fk_promotionid: promotionid,
                                            fk_flightid: promotion_checkbox_value[j],
                                        }),
                                    }
                                );
                            }
                            // if post is successful, show #add-airport-success-modal, and close #add-airport-modal
                            $("#add-promotion-modal").modal("hide");
                            $("#add-promotion-success-modal").modal("show");
                            setTimeout(() => {
                                // refresh the page
                                window.location.reload();
                            }, 3000);
                        },
                        error: function (data) {
                            // if post is unsuccessful, show #add-airport-error-modal
                            $("#add-promotion-error-modal").modal("show");
                        }
                    }
                );
            }
        })
    })
</script>

</html>